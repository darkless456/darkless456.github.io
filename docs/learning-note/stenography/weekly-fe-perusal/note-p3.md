---
sidebar_position: 4
---
    
# Perusal Series

## 214.ç²¾è¯»ã€Šweb streamsã€‹

stream æ˜¯æŒç»­åŠ è½½èµ„æºçš„æ–¹å¼ã€‚I/O å¤„ç†æ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚

- readable streamsï¼Œåªå¯è¯»
- writable streamsï¼Œåªå¯å†™
- transform streamsï¼Œå¯¹æµæ•°æ®è½¬æ¢

## 215.ç²¾è¯»ã€Šä»€ä¹ˆæ˜¯ LOD è¡¨è¾¾å¼ã€‹

LOD(Level of Detail)ï¼Œæ•°æ®è¯¦ç»†çº§åˆ«ã€‚LOD è¡¨è¾¾å¼ï¼Œåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­æè¿°ä¸åŒçš„è¯¦ç»†ç²’åº¦ã€‚

æ•°æ®åˆ†æå¯ä»¥çœ‹ä½œæ˜¯å¯¹æ•°æ®æ±‡æ€»è®¡ç®—çš„è¿‡ç¨‹ï¼Œä¼´éšç€æ•°æ®çš„è¯¦ç»†ç¨‹åº¦é€æ¸é™ä½ã€‚

## 218.ç²¾è¯»ã€ŠRust æ˜¯ JS åŸºå»ºçš„æœªæ¥ã€‹

- swc
  - @swc/cli åŸºå»º
  - @swc/core é’ˆå¯¹å¼€å‘è€…ï¼Œæä¾›åŸºæœ¬ API
  - @swc/wasm-web æµè§ˆå™¨è°ƒç”¨ wasm ç‰ˆ swc
  - @swc/jest jest å®ç°
  - swc-loaderï¼Œæ›¿ä»£ babel-loader
  - swcpackï¼Œswc ç‰ˆ webpack
- esbuild ï¼ˆgo ç¼–å†™ï¼‰
- NAPI-RSï¼Œrust åˆ° node çš„è¡”æ¥å±‚

## 22.ç²¾è¯»ã€ŠV8 å¼•æ“ç‰¹æ€§å¸¦æ¥çš„çš„ JS æ€§èƒ½å˜åŒ–ã€‹

1. try...catch å¯¹æ€§èƒ½çš„å½±å“å¿½ç•¥ä¸è®¡
2. è§£å†³ delete çš„æ€§èƒ½é—®é¢˜
3. è§£å†³ arguments è½¬æ•°ç»„æ€§èƒ½é—®é¢˜
4. bind å¯¹æ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥
5. å‡½æ•°è°ƒç”¨å¯¹æ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥ï¼ˆæ³¨é‡Šï¼Œç©ºç™½ï¼Œå‡½æ•°é—´è°ƒç”¨ï¼‰
6. 64 ä½æ•°å­—è®¡ç®—æ€§èƒ½åªæœ‰ 32 ä½çš„ 2/3ï¼Œå°½é‡ç”¨å­—ç¬¦ä¸²å¤„ç†å¤§æ•°
7. éå† object é€Ÿåº¦ï¼Œfor in > Object.keys > Object.values
8. å•æ€å‡½æ•°æ€§èƒ½é«˜äºå¤šæ€ï¼Œå¦‚æ··åˆç±»å‹ array æ€§èƒ½ä½äºå•ç±»å‹ array

## 219 ï½ 222.ç²¾è¯»ã€Šæ·±å…¥äº†è§£ç°ä»£æµè§ˆå™¨ä¸€ï½å››ã€‹

1. CPUã€GPU æ˜¯è®¡ç®—ç¡¬ä»¶ï¼Œæä¾› API ä¾›æ±‡ç¼–è¯­è¨€è°ƒç”¨ï¼›æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰åŸºäºå®ƒä»¬ä¹‹ä¸Šç”¨ C è¯­è¨€ï¼ˆå¦‚ Linuxï¼‰ç®¡ç†ç¡¬ä»¶ï¼Œä¾‹å¦‚è¿›ç¨‹è°ƒåº¦ã€å†…å­˜åˆ†é…ã€ç”¨æˆ·æ€åˆ‡æ¢ï¼›åº”ç”¨ç¨‹åºè¿è¡Œäº OS ä¹‹ä¸Šï¼Œé€šè¿‡ OS é—´æ¥æ“ä½œç¡¬ä»¶ã€‚
2. ç¡¬ä»¶æ˜¯æ²¡æœ‰éš”ç¦»å’Œå®‰å…¨æªæ–½çš„ï¼Œæ‰€ä»¥ APP ç›´æ¥æ“ä½œç¡¬ä»¶ä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚
3. OS çš„è¿›ç¨‹å¯ä»¥åˆ†é…ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´ã€‚è¿›ç¨‹é€šè¿‡ IPC é€šä¿¡ã€‚
4. æµè§ˆå™¨å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ï¼ˆChromeï¼‰

    - æµè§ˆå™¨æ¨¡å—ï¼ˆBrowserï¼‰ï¼Œåè°ƒå…¶ä»–æ¨¡å—è¿è¡Œ
    - ç½‘ç»œæ¨¡å—ï¼ˆNetworkï¼‰ï¼Œç½‘ç»œ I/O
    - å­˜å‚¨æ¨¡å—ï¼ˆStorageï¼‰ï¼Œæœ¬åœ° I/O
    - ç”¨æˆ·ç•Œé¢æ¨¡å—ï¼ˆUIï¼‰ï¼Œæµè§ˆå™¨ UI
    - GPU æ¨¡å—ï¼Œå›¾å½¢è®¡ç®—
    - æ¸²æŸ“æ¨¡å—ï¼ˆRendererï¼‰ï¼Œç½‘é¡µæ¸²æŸ“
    - è®¾å¤‡æ¨¡å—ï¼ˆDeviceï¼‰ï¼Œæœ¬åœ°è®¾å¤‡äº¤äº’
    - æ’ä»¶æ¨¡å—ï¼ˆPluginï¼‰ï¼Œæµè§ˆå™¨æ’ä»¶

5. æµè§ˆå™¨æ¶æ„è®¾è®¡

    - å°‘è¿›ç¨‹ï¼Œèµ„æºæ¶ˆè€—å°ï¼Œç¨³å®šæ€§å·®ï¼Œä½æ€§èƒ½è®¾å¤‡
    - å¤šè¿›ç¨‹ï¼Œèµ„æºæ¶ˆè€—å¤§ï¼Œç¨³å®šæ€§å¥½ï¼Œé«˜æ€§èƒ½è®¾å¤‡
    - å¼¹æ€§æ¶æ„ï¼Œå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹æ¶æ„ä¸­åˆ‡æ¢

6. æµè§ˆå™¨è·¯ç”±è·³è½¬

    _æ™®é€šè·³è½¬_
    - browser process çš„ UI thread **å“åº”ç”¨æˆ·è¾“å…¥**ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ä¸ºåˆæ³•ç½‘å€ã€‚
      > å½“è¾“å…¥æ—¶æœç´¢åè®®æ—¶ï¼Œåˆ†å‘åˆ°å¦å¤–çš„æœåŠ¡å¤„ç†
    - UI thread é€šçŸ¥ Network thread **è·å–ç½‘é¡µå†…å®¹**ï¼ŒNetwork thread å¯»æ‰¾åˆé€‚åè®®å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå¦‚ï¼šDNS åè®®å¯»å€ï¼ŒTLS åè®®å»ºç«‹å®‰å…¨é“¾æ¥ã€‚
      > å¦‚æœé‡åˆ° 301 é‡å®šå‘ï¼Œé€šçŸ¥ UI thread é‡æ–°èµ°ç¬¬äºŒæ­¥ã€‚
    - Network thread **è¯»å–åˆ°å“åº”å¤´ä¿¡æ¯**ï¼ŒåŒ…å« `Content-Type` è¡¨ç¤ºè¿”å›å†…å®¹æ ¼å¼ï¼Œå¦‚æœæ˜¯ HTMLï¼Œnetwork thread å°†æ•°æ®ä¼ ç»™ renderer process å¤„ç†ã€‚
      > æ­¤æ—¶è¿˜ä¼šæ ¡éªŒå®‰å…¨æ€§ï¼Œæ¯”å¦‚ [CORB](https://www.chromium.org/Home/chromium-security/corb-for-developers/) æˆ– [XSS](https://en.wikipedia.org/wiki/Cross-site_scripting) é—®é¢˜ã€‚
    - è§¦å‘ renderã€‚ä¸€æ—¦æ‰€æœ‰æ£€æŸ¥å®Œæˆï¼ŒNetwork thread é€šçŸ¥ UI thread å·²å‡†å¤‡å¥½è·³è½¬ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰åŠ è½½å®Œæ‰€æœ‰æ•°æ®ï¼Œåªæ£€æŸ¥äº†å“åº”å¤´ï¼‰ï¼ŒUI thread é€šçŸ¥ renderer process å¼€å§‹æ¸²æŸ“ã€‚
      > ä¸ºäº†æå‡æ€§èƒ½ï¼Œ UI thread å†é€šçŸ¥ Network thread çš„åŒæ—¶ä¼šå®ä¾‹åŒ–ä¸€ä¸ª renderer process ç­‰ç€ï¼Œä¸€æ—¦ä¸Šä¸€æ­¥æ£€æŸ¥å®Œæ¯•ç«‹å³è¿›å…¥æ¸²æŸ“é˜¶æ®µï¼Œå¦‚å¤±è´¥åˆ™ä¸¢å¼ƒè¯¥å®ä¾‹åŒ– renderer processã€‚
    - ç¡®è®¤å¯¼èˆªã€‚ä¸Šä¸€æ­¥ä¹‹å browser process é€šè¿‡ IPC åƒ renderer process ä¼ é€ stream æ•°æ®ã€‚
      > æ­¤æ—¶å¯¼èˆªè¢«ç¡®è®¤ï¼Œæµè§ˆå™¨çš„å„ä¸ªçŠ¶æ€ï¼ˆå¯¼èˆªçŠ¶æ€ï¼Œå‰è¿›åé€€å†å²ï¼‰è¢«ä¿®æ”¹ï¼ŒåŒæ—¶æ–¹ä¾¿ tab å…³é—­åå¿«é€Ÿæ¢å¤ï¼Œä¼šè¯è®°å½•è¢«ä¿å­˜åœ¨ç¡¬ç›˜ã€‚
    - åŠ è½½å®Œæˆã€‚å½“ renderer process åŠ è½½å®Œæˆï¼Œé€šçŸ¥ browser process `onLoad` äº‹ä»¶ï¼Œæ­¤æ—¶æµè§ˆå™¨å®ŒæˆåŠ è½½ï¼Œloading å°æ—¶ï¼Œè§¦å‘å„ç§ onLoad å›è°ƒã€‚
      > æ­¤æ—¶ JS å¯èƒ½è¿˜åœ¨åŠ è½½è¿œç¨‹èµ„æº

    _è·³è½¬åˆ°å…¶ä»–ç½‘ç«™_
    - æ‰§è¡Œæ™®é€šè·³è½¬å‰ï¼Œè¿˜ä¼šå“åº” `beforeunload` äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶æ³¨å†Œåœ¨ renderer process, æ‰€ä»¥ browser process ä¼šæ£€æŸ¥ renderer process æ˜¯å¦æ³¨å†Œäº‹ä»¶å“åº”ã€‚æ³¨å†Œè¯¥å“åº”ä¼šæ‹–æ…¢å…³é—­ tab çš„é€Ÿåº¦ã€‚å¦‚æ— éœ€è¦å‹¿æ³¨å†Œã€‚
    - **å¦‚æœè·³è½¬æ˜¯ç”± JS å‘èµ·çš„**ï¼Œæ‰§è¡Œè·³è½¬ç”± renderer process è§¦å‘ï¼Œbrowser process æ‰§è¡Œæ™®é€šè·³è½¬æµç¨‹ã€‚å½“æ‰§è¡Œè·³è½¬æ˜¯ï¼Œä¼šè§¦å‘åŸç«™ç‚¹çš„ `unload` äº‹ä»¶ï¼Œæœ‰æ—§çš„ renderer process å“åº”ï¼Œè€Œæ–°ç«™ç‚¹ä¼šåˆ›å»ºæ–°çš„ renderer process æ¸²æŸ“ã€‚å½“æ—§ç½‘é¡µå…¨éƒ¨å…³é—­åï¼Œé”€æ¯å°±çš„ renderer processã€‚
      > ä¸€ä¸ª tab å†…ï¼Œåœ¨è·³è½¬æ—¶ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ª renderer processã€‚

    _Service Worker_
    - [Service Worker](https://developer.chrome.com/docs/workbox/service-worker-overview/) å¯ä»¥åœ¨é¡µé¢åŠ è½½å‰æ‰§è¡Œï¼ˆä¸šåŠ¡é€»è¾‘ï¼Œæ”¹å˜é¡µé¢å†…å®¹ï¼‰ï¼Œæµè§ˆå™¨æŠŠå®ƒå®ç°åœ¨ renderer process ä¸­ã€‚
    - å½“ Service Worker è¢«æ³¨å†Œåï¼Œä¼šè¢«ä¸¢åˆ°ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼ŒUI thread æ‰§è¡Œæ—¶ä¼šæ£€æŸ¥è¯¥ä½œç”¨åŸŸæ˜¯å¦æ³¨å†Œ Service Workerï¼Œå¦‚æœ‰ï¼Œåˆ™ network thread ä¼šåˆ›å»º renderer process æ‰§è¡Œ Service Workerï¼Œç½‘ç»œå“åº”ä¹Ÿä¼šè¢« Service Worker æ¥ç®¡
      > [Navigation Preload](https://web.dev/blog/navigation-preload)ï¼ŒUI thread ä¼šåœ¨æ£€æŸ¥æ˜¯å¦æ³¨å†Œ Service Worker çš„åŒæ—¶é€šçŸ¥ network thread å‘èµ·è¯·æ±‚ã€‚

7. é¡µé¢æ¸²æŸ“ï¼ˆRenderer Processï¼‰

    _æ¸²æŸ“æ˜¯åˆ†é˜¶æ®µè¿›è¡Œçš„_
    - è§£æï¼Œè§£æ HTML æ–‡æœ¬ä¸º DOMï¼Œé‡åˆ°éœ€è¦åŠ è½½è¿œç¨‹èµ„æºçš„æ ‡ç­¾ï¼ˆimg, link, scriptï¼‰ï¼Œäº¤ç»™ network thread å¹¶è¡Œå¤„ç†ï¼Œå…¶ä¸­ script æ ‡ç­¾ä¼šé˜»å¡è§£æï¼ˆå› ä¸ºJSå¯ä»¥æ”¹å˜DOMï¼Œ åŠ async/deferå¯é¿å…ï¼‰
    - æ ·å¼ï¼Œstyle æ ‡ç­¾ç”³æ˜çš„æ ·å¼ä½œç”¨äº DOM ä¸Šï¼Œç”Ÿæˆ CSSOMï¼ŒåŸºäºé€‰æ‹©å™¨ç¡®å®šèŠ‚ç‚¹
    - å¸ƒå±€ï¼Œç”Ÿæˆ LayoutTree æè¿°å…ƒç´ çš„å¸ƒå±€ï¼Œ`display: none` çš„å…ƒç´ ä¸ä¼šå‡ºç°åœ¨ tree ä¸Šã€‚è¿™æ˜¯å¹³é¢ç»“æ„å…³ç³»
    - ç»˜å›¾ï¼ˆå…‰æ …åŒ–ï¼‰ï¼ŒPaintRecord è®°å½•å…ƒç´ çš„å±‚çº§å…³ç³»ï¼Œå†³å®šå…ƒç´ çš„ç»˜åˆ¶é¡ºåºã€‚è¿™æ˜¯ä¸Šä¸‹å±‚çº§ç©ºé—´ç»“æ„å…³ç³»
    - åˆæˆï¼Œå°†éœ€è¦æ¸²æŸ“çš„å†…å®¹åˆ†å±‚ç»˜åˆ¶ä¸æ¸²æŸ“ï¼Œå¹¶å¯é€šè¿‡ CSS å±æ€§ `will-change` æ‰‹åŠ¨ç”³æ˜ä¸ºä¸€ä¸ªæ–°å±‚ã€‚æ¯ä¸€ä¸ªåˆæˆå±‚ä¼šå°†ç»˜å›¾å†…å®¹åˆ‡åˆ†ä¸ºå¤šä¸ªæ …æ ¼äº¤ç”± GPU æ¸²æŸ“ï¼ˆGPUé€‚åˆå¹¶è¡Œä»»åŠ¡ï¼‰ï¼Œæ€§èƒ½ä¼šéå¸¸å¥½ã€‚

      æ¯ä¸ªé˜¶æ®µçš„è®¡ç®—éƒ½ä¾èµ–ä¸Šä¸€é˜¶æ®µçš„è¾“å‡ºï¼Œåœ¨ä¼˜åŒ–æ€§èƒ½æ—¶å¯ä»¥æ³¨æ„ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š
      1. ä¿®æ”¹å…ƒç´ å‡ ä½•å±æ€§éœ€è¦é‡æ–°åˆæˆï¼Œå› æ­¤ä¼šè§¦å‘æ‰€æœ‰é˜¶æ®µçš„é‡æ–°è®¡ç®—
      2. ä¿®æ”¹å…ƒç´ ç»˜å›¾å±æ€§ï¼Œå¦‚é¢œè‰²ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€
      3. transform å±æ€§ä¼šè·³è¿‡å¸ƒå±€å’Œç»˜å›¾é˜¶æ®µï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ GPU æ€§èƒ½åŠ é€Ÿ

    éšå¼åˆæˆå±‚ã€å±‚çˆ†ç‚¸ã€å±‚è‡ªåŠ¨åˆå¹¶
    1. éƒ¨åˆ†å…ƒç´ ä¼šæ˜¾ç¤ºæå‡åˆ°åˆæˆå±‚ï¼Œå¦‚transformã€will-changeã€videoã€canvasã€iframeã€fixedç­‰ç­‰ã€‚
    2. å‘ç”Ÿå…ƒç´ é‡å æ—¶ï¼Œä¸‹æ–¹å…ƒç´ å¦‚æœæ˜¯æ˜¾ç¤ºæå‡åˆ°åˆæˆï¼Œå…¶ä¸Šæ–¹å…ƒç´ ä¹Ÿä¼šè¢«æå‡åˆ°åˆæˆå±‚ã€‚
    3. å½“å‡ºç°å¤æ‚è¡Œä¸ºæ—¶ï¼Œå¦‚è½¨è¿¹åŠ¨ç”»ï¼Œæµè§ˆå™¨æ— æ³•çŸ¥é“å“ªäº›å…ƒç´ ä½äºå½“å‰å…ƒç´ ä¸Šæ–¹ï¼Œåªå¥½æŠŠæ‰€æœ‰å…ƒç´ æå‡åˆ°åˆæˆå±‚ï¼Œå½“æ•°é‡è¿‡å¤šæ—¶ï¼Œæµè§ˆå™¨ä¸GPUçš„é€šä¿¡ä¼šæˆä¸ºç“¶é¢ˆã€‚
    4. æµè§ˆå™¨æ”¯æŒå±‚è‡ªåŠ¨åˆå¹¶ã€‚

8. äº‹ä»¶å¤„ç†ï¼ˆè¾“å…¥è¿›å…¥åˆæˆå™¨ï¼‰
    - è¾“å…¥ï¼šç”¨æˆ·çš„æ“ä½œ
    - åˆæˆå™¨ï¼šæ¸²æŸ“æœ€åä¸€æ­¥ï¼Œåˆ©ç”¨ GPU è¿›è¡Œå…‰æ …åŒ–ç»˜å›¾ï¼ˆå¹¶è¡Œï¼‰ï¼Œå¦‚æœä¸ä¸»è¿›ç¨‹è§£å¶ä¼šæé«˜æ•ˆç‡ï¼ˆè¿è¡Œåœ¨CPUï¼Œä¸²è¡Œï¼‰
    - ç»“è®ºï¼šå®é™…è¿è¡Œä¸­ï¼Œåˆæˆå™¨éœ€è¦å“åº”è¾“å…¥ï¼Œè¿™å¯èƒ½å¯¼è‡´åˆæˆå™¨æ•ˆç‡ä¸‹é™ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿

    è®©åˆæˆå™¨ä¸ä¸»è¿›ç¨‹è§£å¶
    - å½“å…ƒç´ ç»‘å®šäº‹ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†æ­¤ç›‘å¬çš„åŒºåŸŸæ ‡è®°ä¸ºâ€œnon-fastâ€åŒºåŸŸ
    - å½“â€œnon-fastâ€åŒºåŸŸè§¦å‘äº‹ä»¶åï¼Œåˆæˆå™¨å¿…é¡»ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡ï¼Œç­‰å¾…æ¸²æŸ“è¿›ç¨‹æ‰§è¡ŒJSç›‘å¬å›è°ƒå¹¶è·å–ç»“æœï¼Œå¦‚æ˜¯å¦è°ƒç”¨ preventDefault() æ¥é˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚è¿™ä¸ªç­‰å¾…æ—¶é—´æ¶ˆè€—æ—¶å·¨å¤§çš„ï¼Œåœ¨ä½æ€§èƒ½è®¾å¤‡å¦‚æ‰‹æœºï¼Œå¯èƒ½è¾¾åˆ°10ï½100msã€‚å¦‚æœå°†äº‹ä»¶å§”æ‰˜ç»‘å®šåˆ°document.bodyçº§åˆ«ï¼Œæ•´ä¸ªé¡µé¢éƒ½è¢«æ ‡è®°ä¸ºâ€œnon-fastâ€
    - è·³è¿‡ä¸æ¸²æŸ“è¿›ç¨‹çš„ç­‰å¾…ï¼Œåˆæˆå™¨çš„æ•ˆç‡å°†å¤§å¤§æé«˜ã€‚ä½†æ˜¯ preventDefault() å°†ä¼šå¤±æ•ˆ
      ```js
      document.body.addEventListener('touchstart', e => {
        // ...
      }, { passive: true });
      ```

    äº‹ä»¶åˆå¹¶ï¼Œæµè§ˆå™¨ä¼šåˆå¹¶é«˜é¢‘è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚æ»šåŠ¨ï¼Œé¿å…äº‹ä»¶é˜»å¡ã€‚å¦‚æœä¸å¸Œæœ›ä¸¢å¤±ä¸­é—´çŠ¶æ€ï¼Œä½¿ç”¨ï¼š`getCoalescedEvents`

## 238.ç²¾è¯»ã€Šä¸å†éœ€è¦ JS åšçš„ 5 ä»¶äº‹ã€‹

- ä½¿ç”¨ CSS æ§åˆ¶ SVG åŠ¨ç”»ï¼Œæ§åˆ¶çº¿æ¡è™šå®
- Hover æ—¶å‡ºç°çš„ sidebarï¼Œä¼ªç±»:hoverï¼Œtab é€‰ä¸­ :focus-within
- sticky position, åœ¨çˆ¶å®¹å™¨å†…å›ºå®šå®šä½
- æ‰‹é£ç´èœå•ï¼Œ`<details`> æ ‡ç­¾
- æš—è‰²ä¸»é¢˜ï¼Œåˆ¤æ–­ç³»ç»Ÿä¸»é¢˜ï¼Œ`@media(prefers-color-theme: light/dark/nno-preference)`
- å¹»ç¯ç‰‡æ»šåŠ¨
    ```css
    .parent {scroll-snap-type: y mandatory;} 
    .child {scroll-snap-align: start}
    ```

## 239.ç²¾è¯»ã€ŠJS æ•°ç»„çš„å†…éƒ¨å®ç°ã€‹

- å¿«ç±»å‹ï¼š`[Packed(è¿ç»­æœ‰å€¼), Holeyï¼ˆç¨€æ•£ï¼‰]_[SMIï¼ˆ32ä½æ•´å‹ï¼‰, Doubleï¼ˆæµ®ç‚¹ï¼‰, ''ï¼ˆå¤åˆç±»å‹ï¼‰]_Elements`
- æ…¢ç±»å‹ï¼š`Dictionary_Elements` å­—å…¸æ¨¡å¼ï¼ŒèŠ‚çœç©ºé—´ï¼Œé¢å¤–æŸ¥è¯¢æ¶ˆè€—
- å¿«ç±»å‹å¯è‡ªåŠ¨é™çº§ä¸”ä¸å¯é€†ï¼›å¿«æ…¢ç±»å‹å¯è½¬æ¢ï¼Œå–å†³äºèŠ‚çœç©ºé—´æ˜¯å¦è¶…è¿‡50%

## 240.ç²¾è¯»ã€ŠReact useEvent RFCã€‹

`useEvent`ï¼Œå›è°ƒå‡½æ•°ä¸å˜å¼•ç”¨ï¼Œä½†å¯ä»¥è·å–æœ€æ–°å€¼ã€‚ï¼ˆç»•è¿‡ä¾èµ–æ£€æµ‹ï¼‰

## 242.ç²¾è¯»ã€Šweb reflowã€‹

è§¦å‘æ—¶æœºï¼š
- å…ƒç´ ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶
- è·å–å…ƒç´ /é¼ æ ‡ä½ç½®ï¼Œå°ºå¯¸ä¿¡æ¯ï¼Œä¸ºä¿è¯å‡†ç¡®ï¼Œéœ€è¦reflow
- å…ƒç´ focus/selectï¼Œç¡®å®šå…ƒç´ å½“å‰çŠ¶æ€
- innerText
- contenteditable çš„å…ƒç´ 

ä¼˜åŒ–ï¼š
- åˆå¹¶æ“ä½œ
- è¯»å†™åˆ†ç¦»
- fastdom åº“ï¼Œåœ¨window.requestAnimationFrame æ—¶æœºæ‰§è¡Œ

## 254.ç²¾è¯»ã€Šå¯¹å‰ç«¯æ¶æ„çš„ç†è§£ - åˆ†å±‚ä¸æŠ½è±¡ã€‹

- ä¸šåŠ¡æ¨¡å—çš„æ¶æ„è®¾è®¡ï¼Œä»éœ€æ±‚å‡ºå‘è®¾è®¡ä¸šåŠ¡å­æ¨¡å—ï¼Œå®šä¹‰å½¼æ­¤çš„èŒè´£å’Œå…³ç³»
- æ¨¡å—åˆ’åˆ†å–å†³äºä¸šåŠ¡ç‰¹å®šï¼Œæ¨¡å—åˆ†å±‚å–å†³äºä¸šåŠ¡æ‹“å±•éœ€æ±‚
- å†¯è¯ºä¼Šæ›¼æ¶æ„ - è®¡ç®—ã€å­˜å‚¨ã€æ‰©å±•ï¼ˆè¾“å…¥è¾“å‡ºï¼‰
- æ¶æ„è®¾è®¡ä¹Ÿè¦è§£å†³ä»£ç ä¸€è‡´æ€§é—®é¢˜ï¼ˆå¯ç»´æŠ¤æ€§ï¼‰
- åˆ†å±‚æ˜¯æ¶æ„è®¾è®¡çš„é‡ç‚¹ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡åŠ¨æ€å˜åŒ–
- æŠ½è±¡æ˜¯æ¶æ„è®¾è®¡çš„éš¾ç‚¹ï¼Œä¸è¦çº ç»“äºå®Œç¾çš„æŠ½è±¡
- æ€»ç»“ï¼šä¸šåŠ¡å˜åŒ–é©±åŠ¨æ¶æ„ä¸æ–­æ¼”å˜

## 263.ç²¾è¯»ã€Šæˆ‘ä»¬ä¸ºä½•å¼ƒç”¨ css-in-jsã€‹

ä¼˜ç‚¹ï¼š
- æ— å…¨å±€æ ·å¼å†²çªï¼Œæ¨¡å—åŒ–èƒ½åŠ›
- å’Œæ™®é€š JS ä»£ç ä¸€èµ·ç®¡ç†
- æ”¯æŒ JS å˜é‡

ç¼ºç‚¹ï¼š
- è¿è¡Œæ—¶æ€§èƒ½ï¼ŒReact 18 çš„è°ƒåº¦æœºåˆ¶ä¸‹ï¼Œåœ¨è¿è¡Œæ—¶æ’å…¥æ ·å¼ä¼šæš‚åœæ¸²æŸ“ï¼Œç­‰è§£æå®Œæ ·å¼å†ç»§ç»­
- æ ·å¼ä¼˜å…ˆçº§æ— æ³•è‡ªå®šä¹‰ï¼Œclassä¼˜å…ˆçº§æœ‰ header å®šä¹‰é¡ºåºå†³å®šï¼Œè€Œé classname é¡ºåºå†³å®š

## 29.ç²¾è¯»ã€ŠJS ä¸­çš„å†…å­˜ç®¡ç†ã€‹

å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼š
1. åˆ†é…å†…å­˜
2. ä½¿ç”¨å†…å­˜ï¼ˆè¯»/å†™ï¼‰
3. é‡Šæ”¾å†…å­˜ï¼ˆè‡ªåŠ¨/æ‰‹åŠ¨ï¼‰

JS çš„å†…å­˜å›æ”¶ï¼š
- æ ‡è®°æ¸…é™¤ï¼šé€šè¿‡æ ‡è®°ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ¥å›æ”¶å†…å­˜ï¼ˆç°ä»£æµè§ˆå™¨æ™®éé‡‡ç”¨ï¼‰
  - ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œéå†æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œæ ‡è®°ä¸ºâ€œæ´»è·ƒâ€
  - åƒåœ¾å›æ”¶å™¨å®šæœŸæ¸…ç†æœªæ ‡è®°çš„å¯¹è±¡
- å¼•ç”¨è®¡æ•°ï¼šé€šè¿‡è®¡æ•°å¼•ç”¨å¯¹è±¡çš„æ•°é‡ï¼Œæ¥åˆ¤æ–­ä½•æ—¶å›æ”¶å†…å­˜
  - é™åˆ¶ï¼šå¾ªç¯å¼•ç”¨

## 30.ç²¾è¯»ã€ŠJavascript äº‹ä»¶å¾ªç¯ä¸å¼‚æ­¥ã€‹

1. åŒæ­¥ä»£ç è¿›å…¥ call stackï¼Œéµå¾ªFIFOåŸåˆ™
2. å¼‚æ­¥ä»£ç è¿›å…¥ Event Loop çš„ Task Queue
3. å½“ call stack ä¸ºç©ºæ—¶ï¼ˆè¿™ä¸ªæ—¶æœºç”±å®¿ä¸»ç¯å¢ƒå†³å®šï¼‰ï¼ŒEvent Loop ä¼šå°† Task Queue ä¸­çš„ä»»åŠ¡ä¾æ¬¡æ”¾å…¥ call stack æ‰§è¡Œ

Macrotask å’Œ Microtask
- Macrotaskï¼šåŒ…æ‹¬æ•´ä½“ä»£ç å—ã€setTimeoutã€setIntervalã€I/O æ“ä½œç­‰
- Microtaskï¼šåŒ…æ‹¬ Promise.thenã€MutationObserverã€Process.nextTickï¼ˆNode.jsï¼‰ç­‰
- æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œæ‰€æœ‰ Microtaskï¼Œå†æ‰§è¡Œä¸€ä¸ª Macrotask

> **å¼‚æ­¥é˜Ÿåˆ—æ˜¯å‘¨è€Œå¤å§‹æ‰§è¡Œï¼Œå¯ä»¥çœ‹ä½œäºŒç»´æ•°ç»„ï¼Œæ¨ªæ’æ˜¯ä¸€ä¸ªé˜Ÿåˆ—çš„ä¸€ä¸ªä¸ªå‡½æ•°ï¼Œçºµæ’æ˜¯ä¸€ä¸ªä¸ªé˜Ÿåˆ—ã€‚ Microtask æŠŠå›è°ƒæ·»åŠ åˆ°å½“å‰é˜Ÿåˆ—ï¼ŒMacrotask æ·»åŠ ä¸€ä¸ªæ–°çš„é˜Ÿåˆ—ã€‚**

## 35.ç²¾è¯»ã€Šdob - æ¡†æ¶å®ç°ã€‹

> MVVM ä¸­ï¼Œä¾èµ–è¿½è¸ªæ˜¯æ ¸å¿ƒ

ä¾èµ–è¿½è¸ªåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š**ä¾èµ–æ”¶é›†**å’Œ**è§¦å‘å›è°ƒ**

å®ç°å‚è€ƒ [mobx](./mobx-observer.md)

## 36.ç²¾è¯»ã€ŠWhen You â€œGitâ€ in Trouble- a Version Control Storyã€‹

```shell
git fsck --full # æ£€æŸ¥repoå®Œæ•´æ€§ï¼Œä¼šæ˜¾ç¤ºæœªè¢«å¼•ç”¨çš„å¯¹è±¡
git fsck --lost-found # æŸ¥æ‰¾ä¸¢å¤±çš„å¯¹è±¡
git fsck --unreachable # æŸ¥æ‰¾ä¸å¯è¾¾çš„å¯¹è±¡

git hash-object xxx.js # è®¡ç®—æ–‡ä»¶çš„å“ˆå¸Œå€¼
git cat-file -p <hash> # æŸ¥çœ‹å¯¹è±¡å†…å®¹
git cat-file -t <hash> # æŸ¥çœ‹å¯¹è±¡ç±»å‹

# blob å¯¹è±¡ï¼Œå­˜å‚¨æ–‡ä»¶å†…å®¹
# tree å¯¹è±¡ï¼Œå­˜å‚¨ç›®å½•ç»“æ„
# commit å¯¹è±¡ï¼Œå­˜å‚¨æäº¤ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½œè€…ã€æ—¶é—´ã€å½“å‰treeå¯¹è±¡ï¼Œå‰ä¸€ä¸ªcommitå¯¹è±¡

git reflog # æŸ¥çœ‹å¼•ç”¨æ—¥å¿—ï¼Œæ‰¾åˆ°ä¸¢å¤±çš„åˆ†æ”¯æˆ–æäº¤
```

## 52.ç²¾è¯»ã€Šå›¾è§£ ES æ¨¡å—ã€‹

ES æ¨¡å—åŒ–çš„å·¥ä½œæœºåˆ¶

1. é™æ€åˆ†æï¼šåœ¨ç¼–è¯‘æ—¶ç¡®å®šæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»
2. ä»£ç åˆ†å‰²ï¼šæŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œä¼˜åŒ–æ€§èƒ½
3. ä½œç”¨åŸŸéš”ç¦»ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œé¿å…å˜é‡å†²çª
4. å¯¼å…¥å¯¼å‡ºï¼šä½¿ç”¨ `import` å’Œ `export` è¯­æ³•è¿›è¡Œæ¨¡å—ä¹‹é—´çš„äº¤äº’

ä¸ CJS çš„åŒºåˆ«

1. ES æ¨¡å—æ˜¯é™æ€çš„ï¼ŒCJS æ˜¯åŠ¨æ€çš„
2. ES æ¨¡å—æ”¯æŒå¼‚æ­¥åŠ è½½ï¼ŒCJS æ˜¯åŒæ­¥åŠ è½½
3. ES æ¨¡å—æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼ŒCJS å…±äº«ä½œç”¨åŸŸ
4. ES æ¨¡å—ä½¿ç”¨ `import` å’Œ `export`ï¼ŒCJS ä½¿ç”¨ `require` å’Œ `module.exports`

## 53.ç²¾è¯»ã€Šæ’ä»¶åŒ–æ€ç»´ã€‹

æ’ä»¶åŒ–æ€ç»´æ˜¯ä¸€ç§å°†ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªå¯æ’æ‹”æ¨¡å—çš„è®¾è®¡ç†å¿µã€‚é€šè¿‡å®šä¹‰æ¸…æ™°çš„æ¥å£å’Œå¥‘çº¦ï¼Œä½¿å¾—å„ä¸ªæ¨¡å—ä¹‹é—´å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚

å¦‚ä½•å®ç°æ’ä»¶åŒ–çš„æ¡†æ¶è®¾è®¡ï¼š

1. **å®šä¹‰æ’ä»¶æ¥å£**ï¼šä¸ºæ’ä»¶å®šä¹‰ç»Ÿä¸€çš„æ¥å£å’Œè§„èŒƒï¼Œç¡®ä¿å„ä¸ªæ¨¡å—ä¹‹é—´çš„å…¼å®¹æ€§ã€‚
2. **å®ç°äº‹ä»¶æœºåˆ¶**ï¼šé€šè¿‡äº‹ä»¶æœºåˆ¶å®ç°æ¨¡å—ä¹‹é—´çš„é€šä¿¡å’Œåä½œã€‚
3. **ä½¿ç”¨ä¾èµ–ç®¡ç†å·¥å…·**ï¼šä½¿ç”¨ä¾èµ–ç®¡ç†å·¥å…·ï¼ˆå¦‚ npmï¼‰ç®¡ç†æ’ä»¶çš„ä¾èµ–å…³ç³»ã€‚
4. **æ”¯æŒçƒ­æ›´æ–°**ï¼šæ”¯æŒæ’ä»¶çš„çƒ­æ›´æ–°ï¼Œæå‡å¼€å‘ä½“éªŒã€‚

## 57.ç²¾è¯»ã€Šç°ä»£ js æ¡†æ¶å­˜åœ¨çš„æ ¹æœ¬åŸå› ã€‹

ç°åœ¨æ¡†æ¶æœ€é‡è¦çš„å¸®åŠ©æ˜¯ä¿æŒ UI ä¸ çŠ¶æ€çš„åŒæ­¥ã€‚
ä¸¤ç§æ–¹å¼ï¼š
1. é‡æ¸²æŸ“ç»„ä»¶ï¼ŒReactï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œç”Ÿæˆæ–°çš„è™šæ‹ŸDOMğŸŒ²ï¼Œæœ€ç»ˆæ”¹å˜å½“å‰çš„çœŸå®DOMï¼Œæˆä¸ºreconciliation
2. ç›‘å¬ä¿®æ”¹ï¼ŒAngular/Vueï¼ŒçŠ¶æ€æ”¹å˜è§¦å‘å¯¹åº”DOMçš„Valueæ›´æ–°

ä¸‰ä¸ªæ¡†æ¶äº’ç›¸å€Ÿé‰´ï¼Œä¸€èˆ¬ä¼šæ··åˆä½¿ç”¨ä¸Šè¿°ä¸¤ç§æ–¹å¼ã€‚

```md
// è¯„è®º
1. ä¸ªäººè§‰å¾—æµè§ˆå™¨åº”è¯¥åšçš„æ˜¯æ›´åº•å±‚çš„äº‹ï¼Œæ¯”å¦‚æ–°çš„äººæœºäº¤äº’ï¼Œæ›´å¿«çš„åŠ è½½å’Œæ¸²æŸ“é€Ÿåº¦ç­‰ç­‰ï¼Œè€ŒUIä¸stateåŒæ­¥çš„äº‹ï¼Œå…¶å®åŠ ä¸Šä¸€ä¸ªä¸­é—´å±‚å°±èƒ½æå®šï¼Œreactã€vueç­‰éƒ½æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œè¿™ä¸€å±‚åº”è¯¥å¼€æ”¾ç»™å¼€å‘è€…è¿›è¡Œå¤„ç†ã€‚
2. çŠ¶æ€ä¸UIåŒæ­¥çš„é—®é¢˜æˆ‘ä¸ªäººç†è§£æ˜¯ä¸€ä¸ªçŠ¶æ€æœºå¤„ç†çŠ¶æ€çš„é—®é¢˜ï¼Œæ•´ä¸ªåº”ç”¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¤„ç†ä¸åŒçš„è¾“å…¥ã€‚è€Œèƒ½æŠŠåº”ç”¨å˜æˆçŠ¶æ€æœºçš„åªèƒ½æ˜¯jsï¼Œhtmlå’Œcsséƒ½ä¸è¡Œã€‚æ‰€ä»¥ä»¥jsä¸ºä¸­å¿ƒè¿›è¡Œå‰ç«¯å¼€å‘æ˜¯è¶‹åŠ¿ï¼Œé™¤éæ‰¾åˆ°æ–°çš„ç¼–ç¨‹æ¨¡å‹
```

## 59.ç²¾è¯»ã€Šå¦‚ä½•åˆ©ç”¨ Nodejs ç›‘å¬æ–‡ä»¶å¤¹ã€‹

```js
// è½®è¯¢æ£€æµ‹æ–‡ä»¶ï¼Œæœ‰å»¶è¿Ÿ
fs.watchFile(dir, (curr, prev) => {
  console.log(`File changed: ${dir}`);
});
```

```js
// ä¸ºäº†æŠ¹å¹³æ“ä½œç³»ç»Ÿå·®å¼‚ï¼Œå›è°ƒæ‰§è¡Œæ¬¡æ•°ä¸ç¡®å®š
fs.watch(dir, (eventType, filename) => {
  console.log(`File changed: ${filename}`);
  // ä¼˜åŒ–åˆ¤æ–­é€»è¾‘
  // 1. å¯¹æ¯”æ–‡ä»¶ä¿®æ”¹æ—¶é—´
  // 2. æ ¡éªŒæ–‡ä»¶md5
  // 3. å»¶è¿Ÿåˆ¤æ–­ï¼ˆdebounceï¼‰
});
```

## 6.ç²¾è¯»ã€ŠJavaScript é”™è¯¯å †æ ˆå¤„ç†ã€‹

1. æŠ›å‡ºæ ‡å‡†çš„ Error å¯¹è±¡
2. Promise ä½¿ç”¨ reject ä»£æ›¿ throw æŠ›å‡ºé”™è¯¯ï¼Œé¿å…æœªæ•è·çš„å¼‚å¸¸
3. ç›‘æ§å®¢æˆ·ç«¯é”™è¯¯ï¼Œ`try...catch`ï¼ˆæ— æ³•æ•æ‰è¯­æ³•é”™è¯¯å’Œå…¨å±€é”™è¯¯ï¼‰,ä½¿ç”¨ `window.onerror` è¿›è¡Œå…¨å±€é”™è¯¯å¤„ç†ã€‚
4. `window.onerror` è·¨åŸŸè§£å†³æ–¹æ¡ˆ
    - `<script>` æ ‡ç­¾æ·»åŠ  `crossorigin` å±æ€§
    - æœåŠ¡å™¨ç«¯è®¾ç½® CORS å“åº”å¤´

## 60.ç²¾è¯»ã€Šå¦‚ä½•åœ¨ nodejs ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‹

1. å‘½ä»¤è¡Œ `PORT=3000 node app.js`
2. `.env` æ–‡ä»¶ + `.dotenv` åŒ…
3. ç”Ÿäº§ç¯å¢ƒï¼Œä½¿ç”¨ä¸“é—¨çš„äº‘æœåŠ¡

## 62.ç²¾è¯»ã€ŠJS å¼•æ“åŸºç¡€ä¹‹ Shapes and Inline Cachesã€‹

JS å¼•æ“çš„è¿ä½œæœºåˆ¶åˆ†ä¸º AST åˆ†æå’Œå­—èŠ‚ç ï¼ˆæœºå™¨ç ï¼‰ç”Ÿæˆã€‚

JS å¼•æ“ä¸ºäº†æé«˜æ€§èƒ½ï¼Œé‡‡ç”¨äº†å¤šç§ä¼˜åŒ–æ‰‹æ®µï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯å½¢çŠ¶ï¼ˆShapesï¼‰å’Œå†…è”ç¼“å­˜ï¼ˆInline Cachesï¼‰ã€‚

- å½¢çŠ¶ï¼ˆShapesï¼‰ï¼šJS å¼•æ“ä¼šä¸ºå¯¹è±¡åˆ›å»ºä¸€ä¸ªå½¢çŠ¶æè¿°ç¬¦ï¼Œè®°å½•å¯¹è±¡çš„ç»“æ„ä¿¡æ¯ï¼ˆå¦‚å±æ€§åã€å±æ€§ç±»å‹ç­‰ï¼‰ï¼Œä»¥ä¾¿å¿«é€Ÿè®¿é—®ã€‚
- å†…è”ç¼“å­˜ï¼ˆInline Cachesï¼‰ï¼šJS å¼•æ“ä¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶è®°å½•ä¸‹ç¬¬ä¸€æ¬¡è°ƒç”¨çš„å½¢çŠ¶ä¿¡æ¯ï¼Œä»¥åå†è°ƒç”¨æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œæé«˜æ€§èƒ½ã€‚

> `Proxy` vs `Object.defineProperty`ï¼Œ åè€…ä¼šç ´åJSå¼•æ“å¯¹æ•°æ®åšçš„ä¼˜åŒ–

## 76.ç²¾è¯»ã€Šè°ˆè°ˆ Web Workersã€‹

```js
// ä¸»çº¿ç¨‹
const worker = new Worker('worker.js');
worker.postMessage('Hello, worker!');
worker.onmessage = function(event) {
  console.log(event.data);
};
worker.terminate();

const ab = new ArrayBuffer(1);
worker.postMessage(ab, [ab]); // ä¼ è¾“æ‰€æœ‰æƒï¼ˆå¯¹è±¡å¼•ç”¨ï¼‰ï¼Œä¸»çº¿ç¨‹ä¸å†æ‹¥æœ‰ ab
```

```js
// worker çº¿ç¨‹
self.onmessage = function(event) {
  console.log(event.data);
  self.postMessage('Hello, main thread!');
};
self.postMessage('Hello, main thread!');
```

åˆ›å»ºæ–¹å¼ï¼š
1. æ‰‹åŠ¨åˆ›å»º
2. é€šè¿‡ URL.createObjectURL() åˆ›å»º

```js
const blob = new Blob([`self.onmessage = function(event) {
  console.log(event.data);
  self.postMessage('Hello, main thread!');
};
self.postMessage('Hello, main thread!');`], { type: 'application/javascript' });
const url = URL.createObjectURL(blob);
const worker = new Worker(url);
```

## 83.ç²¾è¯»ã€ŠReact16 æ–°ç‰¹æ€§ã€‹

1. render æ”¯æŒè¿”å›æ•°ç»„å’Œå­—ç¬¦ä¸²
2. Error Boundariesï¼Œç»„ä»¶æ•è·é”™è¯¯
3. createPortalï¼Œè·¨ç»„ä»¶æ ‘ä¼ é€’å­èŠ‚ç‚¹
4. æ”¯æŒè‡ªå®šä¹‰DOMå±æ€§
5. æ”¯æŒ Fiber æ¶æ„ï¼Œæå‡æ€§èƒ½ã€‚æ›´æ–°è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š
    1. Reconciliation é˜¶æ®µï¼Œæ„å»º Fiber æ ‘ï¼Œå¯ä»¥è¢«æ‰“æ–­
    2. Commit é˜¶æ®µï¼Œæäº¤æ›´æ–°ï¼Œå½±å“çœŸå®DOMï¼Œä¸å¯è¢«æ‰“æ–­
6. Call Returnï¼Œçˆ¶ç»„ä»¶æ ¹æ®å­ç»„ä»¶çš„çš„å›è°ƒä¿¡æ¯å»æ¸²æŸ“å­ç»„ä»¶ã€‚ é€‚ç”¨åœºæ™¯ï¼šç€‘å¸ƒæµå¸ƒå±€
    1. çˆ¶è¿”å›å¯¹callçš„è°ƒç”¨ï¼Œ`unstable_createCall(props.children, callback, props)`
    2. å­è¿”å›å¯¹returnçš„è°ƒç”¨ï¼Œ`unstable_createReturn(obj)`ï¼Œ`obj` æ˜¯callçš„å›è°ƒå‚æ•°
7. Fragmentï¼Œå…è®¸åœ¨ä¸å¢åŠ é¢å¤–èŠ‚ç‚¹çš„æƒ…å†µä¸‹è¿”å›å¤šä¸ªå­å…ƒç´ 
8. `createContext`ï¼Œç”¨äºè·¨ç»„ä»¶ä¼ é€’æ•°æ®
9. `createRef/forwardRef`ï¼Œç”¨äºç»„ä»¶é—´çš„å¼•ç”¨è½¬å‘
10. æ ‡è®° reconciliation é˜¶æ®µç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ºä¸å®‰å…¨çš„
    - component**Will**Mount
    - component**Will**ReceiveProps
    - **should**ComponentUpdate
    - component**Will**Update
11. æ–°å¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°
    - static getDerivedStateFromPropsï¼Œæ ¹æ® props æ›´æ–° state
    - getSnapshotBeforeUpdateï¼Œç»„ä»¶åœ¨æ›´æ–°å‰è·å–å¿«ç…§
    - component**Did**Catchï¼Œç»„ä»¶æ•è·é”™è¯¯
12. StrictModeï¼Œå¸®åŠ©è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€è¿‡æ—¶çš„ API å’Œå…¶ä»–æ½œåœ¨é—®é¢˜
13. Profiler å®éªŒæ€§ APIï¼Œç”¨äºæµ‹é‡ç»„ä»¶æ¸²æŸ“æ€§èƒ½
14. React.memo()/React.lazy/Suspenseï¼Œæ”¯æŒç»„ä»¶çš„æ‡’åŠ è½½å’Œæ€§èƒ½ä¼˜åŒ–
15. static contextTypeï¼Œç±»ç»„ä»¶ä¸­ä½¿ç”¨ context çš„ä¾¿æ·æ–¹å¼
16. static getDerivedStateFromErrorï¼Œç»„ä»¶æ•è·å­ç»„ä»¶é”™è¯¯å¹¶æ›´æ–° state
17. Hooksï¼ˆReact 16.8ï¼‰
    - useStateï¼Œå‡½æ•°ç»„ä»¶ä¸­çš„çŠ¶æ€ç®¡ç†
    - useEffectï¼Œå‰¯ä½œç”¨å¤„ç†
    - useContextï¼Œä½¿ç”¨ context
    - useReducerï¼Œç±»ä¼¼ Redux çš„çŠ¶æ€ç®¡ç†
    - useCallbackï¼Œç¼“å­˜å‡½æ•°å¼•ç”¨
    - useMemoï¼Œç¼“å­˜è®¡ç®—ç»“æœ
    - useRefï¼Œåˆ›å»ºå¯å˜å¼•ç”¨
    - useImperativeHandleï¼Œè‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼
    - useLayoutEffectï¼Œä¸ DOM äº¤äº’çš„å‰¯ä½œç”¨å¤„ç†
    - useDebugValueï¼Œè°ƒè¯•è‡ªå®šä¹‰ Hook
18. Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰ï¼ŒReact 16 å¼•å…¥çš„å®éªŒç‰¹æ€§ï¼Œæ”¯æŒæ›´ç»†ç²’åº¦çš„æ¸²æŸ“æ§åˆ¶å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

## 86.ç²¾è¯»ã€Šå›½é™…åŒ–å¸ƒå±€ - Logical Propertiesã€‹

- `inline-start` å’Œ `inline-end`ï¼Œåˆ†åˆ«è¡¨ç¤ºè¡Œå†…å¼€å§‹å’Œè¡Œå†…ç»“æŸï¼Œå–ä»£äº† `left` å’Œ `right`ã€‚(display: inline)
- `block-start` å’Œ `block-end`ï¼Œåˆ†åˆ«è¡¨ç¤ºå—çº§å¼€å§‹å’Œå—çº§ç»“æŸï¼Œå–ä»£äº† `top` å’Œ `bottom`ã€‚(display: block)
- ä½¿ç”¨ css grid ä¸ flexbox å¸ƒå±€æ–¹æ¡ˆçš„ç½‘é¡µï¼Œå°†åœ¨æ”¯æŒçš„æµè§ˆå™¨ä¸Šè‡ªåŠ¨äº«å—å›½é™…åŒ–å¸ƒå±€è°ƒæ•´ï¼Œä¸éœ€è¦æ”¹å˜è¯­æ³•ã€‚
- `writing-mode` æ’ç‰ˆï¼Œ`direction` æ–‡å­—å¯¹é½

## 87.ç²¾è¯»ã€ŠsetState åšäº†ä»€ä¹ˆã€‹

`react` åŒ…å®šä¹‰æ¥å£ï¼Œreact-domã€react-native å®ç°æ¥å£ã€‚
- setState, ins.updater = ReactDOMUpdater/ReactNativeUpdater/ReactDOMServerUpdater
- useHook, å®ç° dispatch æ¥å£

## 88.ç²¾è¯»ã€ŠCaches APIã€‹

Caches API æ˜¯ä¸€ä¸ªç”¨äºåœ¨æµè§ˆå™¨ä¸­å­˜å‚¨å’Œæ£€ç´¢è¯·æ±‚åŠå…¶å“åº”çš„æ¥å£ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥ç¼“å­˜ç½‘ç»œè¯·æ±‚ï¼Œä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¦»çº¿ä½“éªŒã€‚

### ä¸»è¦ç‰¹ç‚¹

1. **ç¼“å­˜å­˜å‚¨**ï¼šCaches API å…è®¸å°†è¯·æ±‚åŠå…¶å“åº”å­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚ç¼“å­˜å¯ä»¥æ˜¯æŒä¹…æ€§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸´æ—¶çš„ã€‚
2. **è¯·æ±‚æ‹¦æˆª**ï¼šé€šè¿‡ Service Workerï¼Œå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶è¿”å›ç¼“å­˜ä¸­çš„å“åº”ï¼Œä»è€Œå®ç°ç¦»çº¿æ”¯æŒå’Œå¿«é€ŸåŠ è½½ã€‚
3. **ç‰ˆæœ¬ç®¡ç†**ï¼šCaches API æ”¯æŒç¼“å­˜ç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥è½»æ¾åœ°æ›´æ–°å’Œåˆ é™¤æ—§çš„ç¼“å­˜ã€‚

### ä½¿ç”¨ç¤ºä¾‹

```js
// æ‰“å¼€æˆ–åˆ›å»ºä¸€ä¸ªç¼“å­˜
caches.open('my-cache').then(cache => {
  // å°†è¯·æ±‚åŠå…¶å“åº”å­˜å‚¨åœ¨ç¼“å­˜ä¸­
  cache.put('/api/data', new Response(JSON.stringify({ data: 'Hello, world!' })));
});

// ä»ç¼“å­˜ä¸­æ£€ç´¢å“åº”
caches.match('/api/data').then(response => {
  if (response) {
    // ç¼“å­˜ä¸­å­˜åœ¨å“åº”
    response.json().then(data => {
      console.log(data);
    });
  }
});

// ç»“åˆ service worker ä½¿ç”¨
self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request).then(response => {
      return response || fetch(event.request);
    })
  );
});
```

### æ³¨æ„äº‹é¡¹

- Caches API åªèƒ½åœ¨ HTTPS ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œæˆ–è€…åœ¨ localhost ä¸Šè¿›è¡Œå¼€å‘ã€‚
- ç¼“å­˜çš„å¤§å°æ˜¯æœ‰é™åˆ¶çš„ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®ç­–ç•¥è‡ªåŠ¨æ¸…ç†æ—§çš„ç¼“å­˜ã€‚

## 89.ç²¾è¯»ã€Šå¦‚ä½•ç¼–è¯‘å‰ç«¯é¡¹ç›®ä¸ç»„ä»¶ã€‹

- é¡¹ç›®æ„å»ºï¼Œä½¿ç”¨å¤æ‚çš„æ„å»ºçº¦æŸç­–ç•¥ï¼Œåªè¦æœ€ç»ˆç»“æœç¬¦åˆæµè§ˆå™¨è§„èŒƒå°±è¡Œ
- ç»„ä»¶æ„å»ºï¼Œé‡‡ç”¨ç›¸å¯¹ç®€å•çš„åŠæ³•ï¼Œç¡®ä¿ä»£ç çš„é€šç”¨æ€§

## 96.ç²¾è¯»ã€ŠuseEffect å®Œå…¨æŒ‡å—ã€‹

å‡½æ•°ç»„ä»¶ç‰¹æ€§ï¼š
- æ¯æ¬¡render éƒ½æœ‰è‡ªå·±çš„ state å’Œ props å¿«ç…§ï¼ˆcapture valueï¼‰
- æ¯æ¬¡render éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°å¿«ç…§
- æ¯æ¬¡render éƒ½æœ‰è‡ªå·±çš„ effect å¿«ç…§
- `useRef` å¯ä»¥ç»•è¿‡å¿«ç…§é™åˆ¶ï¼Œå®ç°è·¨ render å…±äº«æ•°æ®
- `useEffect` ä¾èµ–é¡¹å˜åŒ–æ—¶ï¼Œæ‰§è¡Œ effect å›è°ƒã€‚ä¾èµ–é¡¹å¯ä»¥æ˜¯ stateã€props æˆ–è€…å…¶ä»–å˜é‡ï¼ˆä¾‹å¦‚å¯¹è±¡çš„å¼•ç”¨ï¼‰

## 97.ç²¾è¯»ã€Šç¼–å†™æœ‰å¼¹æ€§çš„ç»„ä»¶ã€‹

1. ä¸è¦é˜»å¡æ•°æ®æµï¼Œä¸è¦å°†æ¥æ”¶åˆ°çš„props æœ¬åœ°åŒ–
2. ä¸è¦é˜»å¡å‰¯ä½œç”¨çš„æ•°æ®æµ
3. ä¸è¦å› ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œé˜»å¡æ•°æ®æµï¼ˆç±»ç»„ä»¶ä¸­è‡ªå®šä¹‰çš„ shouldComponentUpdateï¼‰
4. æ—¶åˆ»å‡†å¤‡æ¸²æŸ“
5. ä¸è¦æœ‰å•ä¾‹ç»„ä»¶
6. éš”ç¦»æœ¬åœ°çŠ¶æ€

```js
// ä¼˜åŒ–å°æ‰‹æ®µï¼šå¦‚æœçˆ¶ç»„ä»¶ä¾èµ–æ¯”è¾ƒå¤šå­ç»„ä»¶çš„åå‘æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ useReducer ä»£æ›¿ useState
const AppDispatchContext = React.createContext(null);
const appReducer = (state, action) => {
  switch (action.type) {
    // ...
  }
  return newState;
}

const App = memo(function App(props) {
  const [state, dispatch] = useReducer(appReducer, initialState);
  return (
    <AppDispatchContext.Provider value={dispatch}>
      <ChildComponent {...props} state={state} />
    </AppDispatchContext.Provider>
  );
});

```


<div style={{textAlign: 'right'}}><small style={{color: 'grey'}}>last modified at September 4, 2025 16:45</small></div>
      