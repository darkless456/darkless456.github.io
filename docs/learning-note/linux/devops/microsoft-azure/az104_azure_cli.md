---
sidebar_position: 2
---
    
# Azure CLI

The Azure CLI is a command-line program to connect to Azure and execute administrative commands on Azure resources.

## Install Azure CLI

On both Linux and macOS, you'll use a package manager to install. The recommended package manager differs by OS and distribution:

- Linux: apt-get (Ubuntu), yum (Red Hat or CentOS), and aypper (OpenSUSE)
- Mac: Homebrew
- Windows: install by downloading and running an MSI file.

### Linux (Ubuntu)

1. Modify your sources list so that the Microsoft repository is registered and the package manager can locate the Azure CLI package:

```bash
AZ_REPO=$(lsb_release -cs)
echo "deb [arch=amd64] https://packages.microsoft.com/repos/azure-cli/ $AZ_REPO main" | \
sudo tee /etc/apt/sources.list.d/azure-cli.list
```

2. Import the encryption key for the Microsoft Ubuntu repository. This allows the package manager to verify that the Azure CLI package you installed comes from Microsoft.

```bash
curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -
```

3. Install the CLI:
   
```bash
sudo apt-get install apt-transport-https
sudo apt-get update && sudo apt-get install azure-cli
```

### Mac

1. Update you brew repository to make sure you get the latest Azure CLI package:

```bash
brew update
```

2. Install the CLI:

```bash
brew install azure-cli
```

### Window

1. Go to https://aka.ms/installazurecliwindows and select Run or Open file in the browser security dialog box.

2. In the installer, accept the license terms, then select Install.

3. In the User Account Control dialog, select Yes.

_To verify your installation by running version check: `az --version`_

## Work with Azure CLI

### Find Help

- Find the most popular commands related to the word **blob**:

```bash
az find blob

# Finding examples...

# Here are the most common ways to use [blob]: 

# Restore blobs in the specified blob range.
# time=`date -u -d "30 minutes" '+%Y-%m-%dT%H:%MZ'`
# az storage blob restore --account-name mystorageaccount -g MyResourceGroup -t $time -r container0/blob1 container0/blob2

# Download a blob to a file path. (autogenerated)
# az storage blob download --account-name mystorageaccount --auth-mode login --container-name mycontainer --file /path/to/file --name MyBlob

# Restore blobs in two specified blob ranges. For examples, (container1/blob1, container2/blob2) and (container2/blob3..container2/blob4).
# az storage blob restore --account-name mystorageaccount --resource-group MyResourceGroup --time-to-restore 2020-02-27T03:59:59Z --blob-range container1/blob1 container2/blob2 --blob-range container2/blob3 container2/blob4
```

- Show me the most popular commands for an Azure CLI command group, such as `az vm`:

```bash
az find "az vm"

# Finding examples...

# Here are the most common ways to use [az vm]: 

# Deallocate, generalize, and capture a stopped virtual machine. (autogenerated)
# az vm deallocate --name MyVm --resource-group MyResourceGroup

# Create a default Ubuntu VM with automatic SSH authentication.
# az vm create --name MyVm --resource-group MyResourceGroup --image UbuntuLTS

# Start a stopped VM. (autogenerated)
# az vm start --name MyVm --resource-group MyResourceGroup
```

- Show me the most popular parameters and subcommands for an Azure CLI command:

```bash
az find "az vm create"

# Finding examples...

# Here are the most common ways to use [az vm create]: 

# Create a default Ubuntu VM with automatic SSH authentication.
# az vm create --name MyVm --resource-group MyResourceGroup --image UbuntuLTS
```

If you already know the name of the command you want, the `--help` argument will get more detailed information on the command and a list of the available subcommands.

```bash
az storage blob --help
```

### Create an Azure resource

![create a resource](./assets/create-resources-overview.png)

#### 1. Connect

Because you'r working with a local install of the Azure CLI, you'll need to authenticate before you can execute Azure commands by using the **login** command:

```bash
az login

# [
#   {
#     "cloudName": "AzureCloud",
#     "homeTenantId": "b41b72d0-4e9f-4c26-8a69-f949f367c91d",
#     "id": "6edd6bd3-4741-4bd4-87bc-f7f59b8679b5",
#     "isDefault": true,
#     "managedByTenants": [],
#     "name": "Visual Studio Professional Subscription",
#     "state": "Enabled",
#     "tenantId": "b41b72d0-4e9f-4c26-8a69-f949f367c91d",
#     "user": {
#       "name": "Yang_Lin@epam.com",
#       "type": "user"
#     }
#   }
# ]
```

#### 2. Create

You'll often need to create a new resource group before you create a new Azure service.

The `group create` command creates a resource group. You must specify a name and location. The name must be unique within your subscription. The location determines where the metadata for your resource group will be stored. You can use strings like "West US", "North Europe", or "West India" to specify the location; alternatively, you can use single-word equivalents, such as "westus", "northeurope", or "westindia".

```bash
az group create --name <name> --location <location>
```

#### 3. Verify

For many Azure resources, the Azure CLIk provides a `list` subcommand to view resource details. This is useful to verify whether the resource group was successfully created:

```bash
az group list
```

To get a more concise view, you can format the output as a single table:

```bash
az group list --output table

# Name                      Location       Status
# ------------------------  -------------  ---------
# DefaultResourceGroup-EAU  australiaeast  Succeeded
# web-analytics-poc         australiaeast  Succeeded
# cdc-poc                   australiaeast  Succeeded
# configuration-rg          eastus         Succeeded
# hss-dev-rg                eastus         Succeeded
# hss-prod-rg               eastus         Succeeded
# NetworkWatcherRG          eastus         Succeeded
# DefaultResourceGroup-EUS  eastus         Succeeded
# teams-chatbot             eastus         Succeeded
# test-aks                  eastus         Succeeded
```

<div style={{textAlign: 'right'}}><small style={{color: 'grey'}}>last modified at March 15, 2024 14:47</small></div>
      